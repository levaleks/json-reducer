(this["webpackJsonpjson-reducer"]=this["webpackJsonpjson-reducer"]||[]).push([[0],{562:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),s=r(19),a=r.n(s),i=r(85),c=r(604),l=r(569),j=r(612),d=(r(106),r(87)),h=r(30),b=r(25),u=r(621),p=r(615),O=r(613),x=r(617),g=r(88),m=r(619),f=r(620),v=r(73),y=r.n(v),w=r(48),k=r.n(w),S=r(86),E=r(606),C=r(9),M=r(609),B=r(610),F=r(603),z=r(614),U=r(616),I=r(611),P=r(618),A=r(608);const T=Object(C.a)(M.a)((()=>({height:"100%"}))),N=Object(C.a)(B.a)((()=>({display:"flex",alignItems:"center",color:"white",gap:"8px",fontSize:"14px"}))),G=Object(C.a)(F.a)((({theme:e})=>({height:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3),gap:e.spacing(2)}))),$=Object(C.a)(z.a)((()=>({position:"relative",height:"100%"}))),H=Object(C.a)(F.a)((()=>({height:"100%",background:"#272822"}))),J=Object(C.a)(p.a)((({theme:e})=>({gap:e.spacing(1)}))),R=Object(C.a)(U.a)((()=>({flexShrink:0}))),D=Object(C.a)(I.a)((()=>({flexShrink:0}))),L=Object(C.a)(x.a)((()=>({display:"flex",flexDirection:"column",flexGrow:1,position:"relative"}))),V=Object(C.a)(x.a)((({theme:e})=>({position:"absolute",top:0,left:0,width:"100%",height:"100%",maxHeight:"100%",overflowY:"auto",padding:e.spacing(1)}))),W=Object(C.a)(P.a)((({theme:e})=>({position:"absolute",background:`${e.palette.background.paper}33`}))),_=Object(C.a)("ul")((({theme:e})=>({marginBottom:0,padding:e.spacing(0,0,0,2)}))),K=Object(C.a)(A.a)((()=>({maxWidth:"80%"}))),Y=Object(C.a)(O.a)((()=>({textOverflow:"ellipsis",overflow:"hidden"})));var q=r(13);const Q="jsonValue",X="return jsonValue;",Z=e=>new Function(Q,e);class ee{constructor(){this.shouldShowOnBeforeUnloadPopup=!1,this.inputFile={name:"example.json",content:[{name:"blueberry",calories:57,fat:.33,carbs:14.49,protein:.74},{name:"strawberry",calories:32,fat:.3,carbs:7.68,protein:.67},{name:"blackberry",calories:43,fat:.49,carbs:9.61,protein:1.39}]},this.handler={fn:Z(X),error:null},this.output={value:{},error:null},Object(q.d)(this,{inputFile:q.f.ref,handler:q.f.ref,output:q.f.ref},{autoBind:!0})}setInputFile(e){this.inputFile=e,this.shouldShowOnBeforeUnloadPopup=!0}setHandler(e){try{this.handler={fn:Z(e),error:null},this.shouldShowOnBeforeUnloadPopup=!0}catch(t){this.handler={fn:this.handler.fn,error:t instanceof Error?t:new Error(`Unknown: ${t}`)}}}applyHandlerToInputFileContent(){try{this.output={value:this.handler.fn(this.inputFile.content),error:null},this.shouldShowOnBeforeUnloadPopup=!0}catch(e){this.output={value:{},error:e instanceof Error?e:new Error(`Unknown: ${e}`)}}}}const te=Object(n.createContext)(null);class re extends Error{constructor(e){super(("Component is used outside of context provider. "+(e?`Check ${e}.`:"")).trim()),this.name="NoContextProviderError"}}const ne=e=>{const t=Object(n.useContext)(e);if(!t)throw new re;return t},oe=e=>e.fileSizeTooSmall?"File size is too small!":e.fileSizeToolarge?"File size is too large!":e.readerError?"Problem occured while reading file!":e.maxLimitExceeded?"Too many files":e.minLimitNotReached?"Not enought files":"Unknown error",se=e=>{const[t,r]=Object(n.useState)(e);return{errorMessage:t,setErrorMessage:r,clearErrorMessage:()=>r(null)}};var ae=r(1);const ie=Object(h.a)((()=>{const e=ne(te),[t,{filesContent:r,loading:n,clear:o,errors:s}]=Object(S.a)({accept:".json",multiple:!1}),{errorMessage:a,setErrorMessage:i,clearErrorMessage:c}=se(null);if(!n&&s.length&&(i({title:"File error",body:s.length>1?Object(ae.jsx)(_,{children:s.map((e=>Object(ae.jsx)("li",{children:oe(e)})))}):oe(s[0])}),o()),!n&&r.length){const[{content:t,name:n}]=r;try{const r=JSON.parse(t);Object(E.a)(r)||Array.isArray(r)?(i(null),e.setInputFile({content:r,name:n})):i({title:"Invalid data type",body:"Must be either array or object"})}catch(l){i(l instanceof Error?{title:l.name,body:l.message}:{title:"Unknown error",body:String(l)})}o()}return Object(ae.jsxs)(H,{children:[Object(ae.jsxs)(L,{children:[Object(ae.jsx)(V,{children:Object(ae.jsx)(k.a,{src:e.inputFile.content,enableClipboard:!1,theme:"monokai"})}),Object(ae.jsxs)(W,{open:Boolean(a)||n,children:[n&&Object(ae.jsx)(m.a,{size:24}),!n&&a&&Object(ae.jsxs)(K,{variant:"filled",severity:"error",onClose:c,children:[Object(ae.jsx)(f.a,{children:a.title}),a.body]})]})]}),Object(ae.jsx)(u.a,{position:"static",children:Object(ae.jsxs)(J,{variant:"dense",children:[Object(ae.jsx)(Y,{variant:"caption",display:"block",children:e.inputFile.name}),Object(ae.jsx)(x.a,{sx:{flexGrow:1}}),Object(ae.jsx)(D,{variant:"text",size:"small",onClick:t,endIcon:Object(ae.jsx)(y.a,{}),children:"Open"})]})})]})}));var ce=r(605),le=r(77),je=r.n(le),de=r(78),he=r.n(de),be=r(80),ue=r.n(be),pe=r(81),Oe=r.n(pe),xe=r(79),ge=r.n(xe),me=r(75),fe=r.n(me),ve=(r(117),r(118),r(119),r(120),r(76));const ye=Object(C.a)(x.a)((({theme:e})=>({font:'14px/normal "Monaco", "Menlo", "Ubuntu Mono", "Consolas", "source-code-pro", monospace',background:"#272822",padding:e.spacing(1)}))),we=Object(C.a)("span")((()=>({fontStyle:"normal",color:"#66D9EF"}))),ke=Object(C.a)("span")((()=>({color:"#A6E22E"}))),Se=Object(C.a)("span")((()=>({fontStyle:"normal",color:"#FD971F"}))),Ee=Object(C.a)(x.a)((({theme:e})=>({height:"100%",padding:e.spacing(1,2)}))),Ce=Object(h.a)((()=>{const e=ne(te),t=Object(b.a)(),r=Object(ve.useClipboard)(),[o,s]=Object(n.useState)(!1),{errorMessage:a,setErrorMessage:i}=se(null);Object(n.useEffect)((()=>{const{error:t}=e.handler;i(t?{title:t.name,body:t.message}:null)}),[e.handler,e.handler.error,i]);const{errorMessage:c,setErrorMessage:l,clearErrorMessage:j}=se(null);return Object(n.useEffect)((()=>{const{error:t}=e.output;l(t?{title:t.name,body:t.message}:null)}),[e.output,e.output.error,l]),Object(ae.jsxs)(H,{children:[Object(ae.jsxs)(L,{children:[Object(ae.jsxs)(ye,{sx:{borderBottom:`1px dashed ${t.palette.divider}`},children:[Object(ae.jsx)(we,{children:"function"}),"\xa0",Object(ae.jsx)(ke,{children:"anonymous"}),"(",Object(ae.jsx)(Se,{children:Q}),")\xa0","{"]}),Object(ae.jsx)(Ee,{children:Object(ae.jsx)(fe.a,{placeholder:X,mode:"javascript",theme:"monokai",width:"100%",height:"100%",onChange:e.setHandler,fontSize:14,showPrintMargin:!0,showGutter:!1,highlightActiveLine:!1,defaultValue:X,setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!0,enableSnippets:!1,tabSize:2}})}),Object(ae.jsx)(ye,{sx:{borderTop:`1px dashed ${t.palette.divider}`},children:"}"}),Object(ae.jsx)(W,{open:Boolean(c),children:c&&Object(ae.jsxs)(K,{variant:"filled",severity:"error",onClose:j,children:[Object(ae.jsx)(f.a,{children:c.title}),c.body]})})]}),Object(ae.jsx)(u.a,{position:"static",children:Object(ae.jsxs)(J,{variant:"dense",children:[Object(ae.jsx)(ce.a,{title:a?Object(ae.jsxs)(A.a,{variant:"filled",severity:"error",children:[Object(ae.jsx)(f.a,{children:a.title}),a.body]}):Object(ae.jsx)(A.a,{variant:"filled",severity:"success",children:"No syntax errors"}),componentsProps:{tooltip:{sx:{padding:0}}},children:Object(ae.jsx)(R,{size:"small",color:a?"error":"success",sx:{cursor:"help"},children:a?Object(ae.jsx)(je.a,{}):Object(ae.jsx)(he.a,{})})}),Object(ae.jsx)(x.a,{sx:{flexGrow:1}}),Object(ae.jsx)(D,{variant:"text",color:"secondary",size:"small",onClick:()=>{o||(s(!0),r.copy(e.handler.fn.toString()),setTimeout((()=>s(!1)),250))},endIcon:o?Object(ae.jsx)(ge.a,{}):Object(ae.jsx)(ue.a,{}),children:"Copy"}),Object(ae.jsx)(D,{variant:"text",size:"small",disabled:Boolean(a),onClick:e.applyHandlerToInputFileContent,endIcon:Object(ae.jsx)(Oe.a,{}),children:"Run"})]})})]})}));var Me=r(83),Be=r.n(Me),Fe=r(82),ze=r.n(Fe);const Ue=Object(h.a)((()=>{const e=ne(te),{errorMessage:t,setErrorMessage:r}=se(null);return Object(n.useEffect)((()=>{const{value:t}=e.output;Object(E.a)(t)||Array.isArray(t)?r(null):r({title:"Invalid data type",body:"Must be either array or object"})}),[e.output,e.output.value,r]),Object(ae.jsxs)(H,{children:[Object(ae.jsxs)(L,{children:[!t&&Object(ae.jsx)(V,{children:Object(ae.jsx)(k.a,{src:e.output.value,theme:"monokai"})}),Object(ae.jsx)(W,{open:Boolean(t),children:t&&Object(ae.jsxs)(K,{variant:"filled",severity:"error",children:[Object(ae.jsx)(f.a,{children:t.title}),t.body]})})]}),Object(ae.jsx)(u.a,{position:"static",children:Object(ae.jsxs)(J,{variant:"dense",children:[Object(ae.jsx)(x.a,{sx:{flexGrow:1}}),Object(ae.jsx)(D,{variant:"text",color:"success",size:"small",disabled:Boolean(t)||Boolean(e.output.error),onClick:()=>{if(e.output.error)return;let t;try{t=JSON.stringify(e.output.value,null,2)}catch(n){r(n instanceof Error?{title:n.name,body:n.message}:{title:"Unknown error",body:String(n)})}void 0!==t&&ze()(t,"output.json")},endIcon:Object(ae.jsx)(Be.a,{}),children:"Save"})]})})]})})),Ie=Object(h.a)((()=>{const e=Object(b.a)();return Object(ae.jsx)(T,{maxWidth:"xl",children:Object(ae.jsxs)(G,{children:[Object(ae.jsx)(u.a,{position:"static",children:Object(ae.jsxs)(p.a,{variant:"dense",children:[Object(ae.jsxs)(N,{href:"https://github.com/levaleks/json-reducer",underline:"hover",target:"_blank",rel:"noopener",children:[Object(ae.jsx)("img",{src:"/json-reducer/github-mark-light.png",alt:"Github",width:24,height:24}),Object(ae.jsx)(O.a,{variant:"h1",color:"inherit",fontSize:"inherit",children:"JSON Reducer"})]}),Object(ae.jsx)(x.a,{sx:{flexGrow:1}}),Object(ae.jsxs)(N,{href:"https://savelife.in.ua/en/donate-en",underline:"hover",target:"_blank",rel:"noopener",children:[Object(ae.jsx)("img",{src:"/json-reducer/savelife-white.png",alt:"Come Back Alive",width:17,height:22}),"SUPPORT UKRAINE"]})]})}),Object(ae.jsx)($,{elevation:2,children:Object(ae.jsxs)(g.a,{split:"vertical",resizerOptions:{css:{width:"1px",background:e.palette.divider}},children:[Object(ae.jsx)(ie,{}),Object(ae.jsx)(Ce,{}),Object(ae.jsx)(Ue,{})]})})]})})}));var Pe=r(84);const Ae=Object(Pe.a)({palette:{mode:"dark"}}),Te=()=>{const[e]=Object(n.useState)(new ee);return Object(d.a)((t=>{e.shouldShowOnBeforeUnloadPopup&&t.preventDefault()})),Object(ae.jsxs)(j.a,{theme:Ae,children:[Object(ae.jsx)(c.a,{}),Object(ae.jsx)(l.a,{styles:{"body, html, #app":{height:"100%"}}}),Object(ae.jsx)(te.Provider,{value:e,children:Object(ae.jsx)(Ie,{})})]})};i.a.initialize("UA-237447558-1"),a.a.render(Object(ae.jsx)(o.a.StrictMode,{children:Object(ae.jsx)(Te,{})}),document.getElementById("app"))}},[[562,1,2]]]);
//# sourceMappingURL=main.cee27f06.chunk.js.map