(this["webpackJsonpjson-reducer"]=this["webpackJsonpjson-reducer"]||[]).push([[0],{121:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),s=r(19),a=r.n(s),c=r(163),i=r(128),l=r(171),j=(r(103),r(86)),d=r(30),h=r(25),b=r(180),u=r(174),p=r(176),O=r(87),x=r(178),g=r(179),m=r(73),f=r.n(m),v=r(48),y=r.n(v),w=r(85),k=r(165),S=r(8),E=r(168),C=r(169),M=r(162),B=r(173),F=r(175),z=r(170),I=r(177),U=r(167);const P=Object(S.a)(E.a)((()=>({height:"100%"}))),A=Object(S.a)(C.a)((()=>({display:"flex",alignItems:"center",color:"white",gap:"8px",fontSize:"14px"}))),T=Object(S.a)(M.a)((({theme:e})=>({height:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3),gap:e.spacing(2)}))),N=Object(S.a)(B.a)((()=>({position:"relative",height:"100%"}))),G=Object(S.a)(M.a)((()=>({height:"100%",background:"#272822"}))),$=Object(S.a)(u.a)((({theme:e})=>({gap:e.spacing(1)}))),H=Object(S.a)(F.a)((()=>({flexShrink:0}))),J=Object(S.a)(z.a)((()=>({flexShrink:0}))),R=Object(S.a)(p.a)((()=>({display:"flex",flexDirection:"column",flexGrow:1,position:"relative"}))),D=Object(S.a)(p.a)((({theme:e})=>({position:"absolute",top:0,left:0,width:"100%",height:"100%",maxHeight:"100%",overflowY:"auto",padding:e.spacing(1)}))),L=Object(S.a)(I.a)((({theme:e})=>({position:"absolute",background:`${e.palette.background.paper}33`}))),V=Object(S.a)("ul")((({theme:e})=>({marginBottom:0,padding:e.spacing(0,0,0,2)}))),W=Object(S.a)(U.a)((()=>({maxWidth:"80%"})));var _=r(172);const K=Object(S.a)(_.a)((()=>({textOverflow:"ellipsis",overflow:"hidden"})));var Y=r(13);const q="jsonValue",Q="return jsonValue;",X=e=>new Function(q,e);class Z{constructor(){this.shouldShowOnBeforeUnloadPopup=!1,this.inputFile={name:"example.json",content:[{name:"blueberry",calories:57,fat:.33,carbs:14.49,protein:.74},{name:"strawberry",calories:32,fat:.3,carbs:7.68,protein:.67},{name:"blackberry",calories:43,fat:.49,carbs:9.61,protein:1.39}]},this.handler={fn:X(Q),error:null},this.output={value:{},error:null},Object(Y.d)(this,{inputFile:Y.f.ref,handler:Y.f.ref,output:Y.f.ref},{autoBind:!0})}setInputFile(e){this.inputFile=e,this.shouldShowOnBeforeUnloadPopup=!0}setHandler(e){try{this.handler={fn:X(e),error:null},this.shouldShowOnBeforeUnloadPopup=!0}catch(t){this.handler={fn:this.handler.fn,error:t instanceof Error?t:new Error(`Unknown: ${t}`)}}}applyHandlerToInputFileContent(){try{this.output={value:this.handler.fn(this.inputFile.content),error:null},this.shouldShowOnBeforeUnloadPopup=!0}catch(e){this.output={value:{},error:e instanceof Error?e:new Error(`Unknown: ${e}`)}}}}const ee=Object(n.createContext)(null);class te extends Error{constructor(e){super(("Component is used outside of context provider. "+(e?`Check ${e}.`:"")).trim()),this.name="NoContextProviderError"}}const re=e=>{const t=Object(n.useContext)(e);if(!t)throw new te;return t},ne=e=>e.fileSizeTooSmall?"File size is too small!":e.fileSizeToolarge?"File size is too large!":e.readerError?"Problem occured while reading file!":e.maxLimitExceeded?"Too many files":e.minLimitNotReached?"Not enought files":"Unknown error",oe=e=>{const[t,r]=Object(n.useState)(e);return{errorMessage:t,setErrorMessage:r,clearErrorMessage:()=>r(null)}};var se=r(1);const ae=Object(d.a)((()=>{const e=re(ee),[t,{filesContent:r,loading:n,clear:o,errors:s}]=Object(w.a)({accept:".json",multiple:!1}),{errorMessage:a,setErrorMessage:c,clearErrorMessage:i}=oe(null);if(!n&&s.length&&(c({title:"File error",body:s.length>1?Object(se.jsx)(V,{children:s.map((e=>Object(se.jsx)("li",{children:ne(e)})))}):ne(s[0])}),o()),!n&&r.length){const[{content:t,name:n}]=r;try{const r=JSON.parse(t);Object(k.a)(r)||Array.isArray(r)?(c(null),e.setInputFile({content:r,name:n})):c({title:"Invalid data type",body:"Must be either array or object"})}catch(l){c(l instanceof Error?{title:l.name,body:l.message}:{title:"Unknown error",body:String(l)})}o()}return Object(se.jsxs)(G,{children:[Object(se.jsxs)(R,{children:[Object(se.jsx)(D,{children:Object(se.jsx)(y.a,{src:e.inputFile.content,enableClipboard:!1,theme:"monokai"})}),Object(se.jsxs)(L,{open:Boolean(a)||n,children:[n&&Object(se.jsx)(x.a,{size:24}),!n&&a&&Object(se.jsxs)(W,{variant:"filled",severity:"error",onClose:i,children:[Object(se.jsx)(g.a,{children:a.title}),a.body]})]})]}),Object(se.jsx)(b.a,{position:"static",children:Object(se.jsxs)($,{variant:"dense",children:[Object(se.jsx)(K,{variant:"caption",display:"block",children:e.inputFile.name}),Object(se.jsx)(p.a,{sx:{flexGrow:1}}),Object(se.jsx)(J,{variant:"text",size:"small",onClick:t,endIcon:Object(se.jsx)(f.a,{}),children:"Open"})]})})]})}));var ce=r(164),ie=r(77),le=r.n(ie),je=r(78),de=r.n(je),he=r(80),be=r.n(he),ue=r(81),pe=r.n(ue),Oe=r(79),xe=r.n(Oe),ge=r(75),me=r.n(ge),fe=(r(116),r(117),r(118),r(76));const ve=Object(S.a)(p.a)((({theme:e})=>({font:'14px/normal "Monaco", "Menlo", "Ubuntu Mono", "Consolas", "source-code-pro", monospace',background:"#272822",padding:e.spacing(1)}))),ye=Object(S.a)("span")((()=>({fontStyle:"normal",color:"#66D9EF"}))),we=Object(S.a)("span")((()=>({color:"#A6E22E"}))),ke=Object(S.a)("span")((()=>({fontStyle:"normal",color:"#FD971F"}))),Se=Object(S.a)(p.a)((({theme:e})=>({height:"100%",padding:e.spacing(1,2)}))),Ee=Object(d.a)((()=>{const e=re(ee),t=Object(h.a)(),r=Object(fe.useClipboard)(),[o,s]=Object(n.useState)(!1),{errorMessage:a,setErrorMessage:c}=oe(null);Object(n.useEffect)((()=>{const{error:t}=e.handler;c(t?{title:t.name,body:t.message}:null)}),[e.handler,e.handler.error,c]);const{errorMessage:i,setErrorMessage:l,clearErrorMessage:j}=oe(null);return Object(n.useEffect)((()=>{const{error:t}=e.output;l(t?{title:t.name,body:t.message}:null)}),[e.output,e.output.error,l]),Object(se.jsxs)(G,{children:[Object(se.jsxs)(R,{children:[Object(se.jsxs)(ve,{sx:{borderBottom:`1px dashed ${t.palette.divider}`},children:[Object(se.jsx)(ye,{children:"function"}),"\xa0",Object(se.jsx)(we,{children:"anonymous"}),"(",Object(se.jsx)(ke,{children:q}),")\xa0","{"]}),Object(se.jsx)(Se,{children:Object(se.jsx)(me.a,{placeholder:Q,mode:"javascript",theme:"monokai",width:"100%",height:"100%",onChange:e.setHandler,fontSize:14,showPrintMargin:!0,showGutter:!1,highlightActiveLine:!1,defaultValue:Q,setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!0,enableSnippets:!1,tabSize:2}})}),Object(se.jsx)(ve,{sx:{borderTop:`1px dashed ${t.palette.divider}`},children:"}"}),Object(se.jsx)(L,{open:Boolean(i),children:i&&Object(se.jsxs)(W,{variant:"filled",severity:"error",onClose:j,children:[Object(se.jsx)(g.a,{children:i.title}),i.body]})})]}),Object(se.jsx)(b.a,{position:"static",children:Object(se.jsxs)($,{variant:"dense",children:[Object(se.jsx)(ce.a,{title:a?Object(se.jsxs)(U.a,{variant:"filled",severity:"error",children:[Object(se.jsx)(g.a,{children:a.title}),a.body]}):Object(se.jsx)(U.a,{variant:"filled",severity:"success",children:"No syntax errors"}),componentsProps:{tooltip:{sx:{padding:0}}},children:Object(se.jsx)(H,{size:"small",color:a?"error":"success",sx:{cursor:"help"},children:a?Object(se.jsx)(le.a,{}):Object(se.jsx)(de.a,{})})}),Object(se.jsx)(p.a,{sx:{flexGrow:1}}),Object(se.jsx)(J,{variant:"text",color:"secondary",size:"small",onClick:()=>{o||(s(!0),r.copy(e.handler.fn.toString()),setTimeout((()=>s(!1)),250))},endIcon:o?Object(se.jsx)(xe.a,{}):Object(se.jsx)(be.a,{}),children:"Copy"}),Object(se.jsx)(J,{variant:"text",size:"small",disabled:Boolean(a),onClick:e.applyHandlerToInputFileContent,endIcon:Object(se.jsx)(pe.a,{}),children:"Run"})]})})]})}));var Ce=r(83),Me=r.n(Ce),Be=r(82),Fe=r.n(Be);const ze=Object(d.a)((()=>{const e=re(ee),{errorMessage:t,setErrorMessage:r}=oe(null);return Object(n.useEffect)((()=>{const{value:t}=e.output;Object(k.a)(t)||Array.isArray(t)?r(null):r({title:"Invalid data type",body:"Must be either array or object"})}),[e.output,e.output.value,r]),Object(se.jsxs)(G,{children:[Object(se.jsxs)(R,{children:[!t&&Object(se.jsx)(D,{children:Object(se.jsx)(y.a,{src:e.output.value,theme:"monokai"})}),Object(se.jsx)(L,{open:Boolean(t),children:t&&Object(se.jsxs)(W,{variant:"filled",severity:"error",children:[Object(se.jsx)(g.a,{children:t.title}),t.body]})})]}),Object(se.jsx)(b.a,{position:"static",children:Object(se.jsxs)($,{variant:"dense",children:[Object(se.jsx)(p.a,{sx:{flexGrow:1}}),Object(se.jsx)(J,{variant:"text",color:"success",size:"small",disabled:Boolean(t)||Boolean(e.output.error),onClick:()=>{if(e.output.error)return;let t;try{t=JSON.stringify(e.output.value,null,2)}catch(n){r(n instanceof Error?{title:n.name,body:n.message}:{title:"Unknown error",body:String(n)})}void 0!==t&&Fe()(t,"output.json")},endIcon:Object(se.jsx)(Me.a,{}),children:"Save"})]})})]})})),Ie=Object(d.a)((()=>{const e=Object(h.a)();return Object(se.jsx)(P,{maxWidth:"xl",children:Object(se.jsxs)(T,{children:[Object(se.jsx)(b.a,{position:"static",children:Object(se.jsxs)(u.a,{variant:"dense",children:[Object(se.jsxs)(A,{href:"https://github.com/levaleks/json-reducer",underline:"hover",target:"_blank",rel:"noopener",children:[Object(se.jsx)("img",{src:"/json-reducer/github-mark-light.png",alt:"Github",width:24,height:24}),"JSON Reducer"]}),Object(se.jsx)(p.a,{sx:{flexGrow:1}}),Object(se.jsxs)(A,{href:"https://savelife.in.ua/en/donate-en",underline:"hover",target:"_blank",rel:"noopener",children:[Object(se.jsx)("img",{src:"/json-reducer/savelife-white.png",alt:"Come Back Alive",width:17,height:22}),"SUPPORT UKRAINE"]})]})}),Object(se.jsx)(N,{elevation:2,children:Object(se.jsxs)(O.a,{split:"vertical",resizerOptions:{css:{width:"1px",background:e.palette.divider}},children:[Object(se.jsx)(ae,{}),Object(se.jsx)(Ee,{}),Object(se.jsx)(ze,{})]})})]})})}));var Ue=r(84);const Pe=Object(Ue.a)({palette:{mode:"dark"}}),Ae=()=>{const[e]=Object(n.useState)(new Z);return Object(j.a)((t=>{e.shouldShowOnBeforeUnloadPopup&&t.preventDefault()})),Object(se.jsxs)(l.a,{theme:Pe,children:[Object(se.jsx)(c.a,{}),Object(se.jsx)(i.a,{styles:{"body, html, #app":{height:"100%"}}}),Object(se.jsx)(ee.Provider,{value:e,children:Object(se.jsx)(Ie,{})})]})};a.a.render(Object(se.jsx)(o.a.StrictMode,{children:Object(se.jsx)(Ae,{})}),document.getElementById("app"))}},[[121,1,2]]]);
//# sourceMappingURL=main.68096d18.chunk.js.map